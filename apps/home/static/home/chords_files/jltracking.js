function Tracker(e){var o=this;o.access_token=e.cid,o.user_id=""!==e.user_id?e.user_id:"no-user",o.feed_id="undefined"==typeof e.feed_id||""==e.feed_id?"any_feed":e.feed_id,o.clicked="function"==typeof e.clicked?e.clicked:function(){},o.purchased="function"==typeof e.purchased?e.purchased:function(){},o.logToConsoleCookieName="Tracker_log_to_console",o.logToConsole=JL_UTIL._isConsoleCookieExists(o.logToConsoleCookieName),o.log("Tracking initialized with parameters\n	 - access token:"+o.access_token+"\n	 - user id     :"+o.user_id+"\n	 - feed id     :"+o.feed_id)}JL={tracking:function(e){JL.tracker=new Tracker(e)}},Tracker.prototype.track=function(e){var o=this,t=e.event;o.log(t+" action initiated"),o.log(e);var r="search"==t?o.convertTextData:o.convertDealData;o.performAction(r,t,e)},Tracker.prototype.view=function(e){var o=this;o.log("Click action initiated"),o.performAction(o.convertDealData,o.a_click,e)},Tracker.prototype.click=function(e){var o=this;o.log("Click action initiated"),o.performAction(o.convertDealData,o.a_click,e)},Tracker.prototype.purchase=function(e){var o=this;o.log("Purchase action initiated"),o.performAction(o.convertDealData,o.a_purchase,e)},Tracker.prototype.addToCart=function(e){var o=this;o.log("AddToCart action initiated"),o.performAction(o.convertDealData,o.a_add_to_cart,e)},Tracker.prototype.removeFromCart=function(e){var o=this;o.log("RemoveFromCart action initiated"),o.performAction(o.convertDealData,o.a_remove_from_cart,e)},Tracker.prototype.search=function(e){var o=this;o.log("Search action initiated"),o.performAction(o.convertTextData,o.a_search,e)},Tracker.prototype.performAction=function(e,o,t){var r=this;t?t.constructor===Array?r.action(e,o,t):"undefined"!=typeof t.deal_id&&null!=t.deal_id&&""!=t.deal_id||"undefined"!=typeof t.text&&null!=t.text&&""!=t.text?r.action(e,o,[t]):r.log("Action skipped. Provided data object is not Array or does not have 'deal_id' or 'text' property"):r.log("Action skipped. No 'data' provided")},Tracker.prototype.urlQuery=function(){for(var e={},o=window.location.search.substring(1),t=o.split("&"),r=0;r<t.length;r++){var n=t[r].split("=");if("undefined"==typeof e[n[0]])e[n[0]]=n[1];else if("string"==typeof e[n[0]]){var i=[e[n[0]],n[1]];e[n[0]]=i}else e[n[0]].push(n[1])}return e},Tracker.prototype.action=function(e,o,t){var r=this,n=r.urlQuery(),i=r.api_url+"/"+o+"/"+r.user_id,a="undefined"!=typeof did?i+"/"+did:i,c=a+"?access_token="+r.access_token,s=c+"&data="+r.serialize(e,t),l=s+"&feed="+r.feed_id,d=n.jl_ctx,p="undefined"!=typeof n.jl_labels&&""!=n.jl_labels?l+"&jl_labels="+n.jl_labels:l,u="undefined"!=typeof d&&""!=d?p+"&jl_ctx="+d:p,f=u+"&r_source="+window.location.host+window.location.pathname;r.log("About to sent JSONP request: "+f),JL_UTIL._jsonp(r,f)},Tracker.prototype.convertDealData=function(e){for(var o,t=[],r=0;r<e.length;r++)o={},JL_UTIL._traverseObject(e[r],function(t,n){switch(t){case"deal_id":o.pid=n;break;case"count":o.count="number"==typeof e[r].count?n:1;break;default:o[t]=n}}),t.push(o);return t},Tracker.prototype.convertTextData=function(e){return e},Tracker.prototype.serialize=function(e,o){var t=this,r=JSON.stringify(e(o));return t.log("Data object converted to string: "+r),encodeURIComponent(r)},Tracker.prototype.enableLog=function(){var e=this;e.logToConsole=!0,e.log("Stored enable log to console 'marker' cookie. Will expire in 1800000 milliseconds"),JL_UTIL._setCookie(e.logToConsoleCookieName,(new Date).getTime(),18e5),e.log("JL logging Enabled")},Tracker.prototype.disableLog=function(){var e=this;e.log("Removed enable log to console 'marker' cookie"),e.logToConsole=!1,e.log("Stored enable log to console 'marker' cookie. Will expire in -1800000 milliseconds"),JL_UTIL._setCookie(e.logToConsoleCookieName,(new Date).getTime(),-18e5),e.log("JL logging Disabled")},Tracker.prototype.log=function(e){var o=this;o.logToConsole&&window.console&&window.console.log&&console.log(e)},JL_UTIL={_traverseObject:function(e,o){for(var t in e)e.hasOwnProperty(t)&&o(t,e[t])},_objectToQueryString:function(e){var o="";return this._traverseObject(e,function(e,t){"object"==typeof t?JSON.stringify(t):t;o+=encodeURIComponent(e)+"="+encodeURIComponent(t)+"&"}),o},_jsonp:function(e,o){var t=document.createElement("script");t.type="text/javascript",t.src=o,t.async=!0,document.getElementsByTagName("head")[0].appendChild(t),e.log("SENT JSONP request: "+o)},_getUTCTime:function(){return new Date(this.getUTCFullYear(),this.getUTCMonth(),this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()).getTime()},_getCookie:function(e){for(var o=e+"=",t=document.cookie.split(";"),r=0;r<t.length;r++){for(var n=t[r];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(o))return n.substring(o.length,n.length)}return""},_setCookie:function(e,o,t){var r=new Date;r.setTime(r.getTime()+t);var n="expires="+r.toUTCString();document.cookie=e+"="+o+"; Path=/; "+n},_isConsoleCookieExists:function(e){return""!==JL_UTIL._getCookie(e)}},Tracker.prototype.a_purchase="purch",Tracker.prototype.a_click="click",Tracker.prototype.a_add_to_cart="add_to_cart",Tracker.prototype.a_remove_from_cart="remove_from_cart",Tracker.prototype.api_url="https://api.jetlore.com/track",Tracker.prototype.a_search="search";